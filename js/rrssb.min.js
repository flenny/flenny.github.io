(function(m,w,g){var b=function(){w(".rrssb-buttons").each(function(f){var l=w(this),c=w("li",l).length,a=100/c;w("li",l).css("width",a+"%").attr("data-initwidth",a)})},j=function(){w(".rrssb-buttons").each(function(l){var o=w(this),f=parseFloat(w(o).width()),a=w("li",o).not(".small").first().width(),c=w("li.small",o).length;a>170&&c<1?w(o).addClass("large-format"):w(o).removeClass("large-format");f<200?w(o).removeClass("small-format").addClass("tiny-format"):w(o).removeClass("tiny-format")})},x=function(){w(".rrssb-buttons").each(function(C){var y=w(this),t=0,A=0,F,u,E=w("li.small",y).length;if(E===w("li",y).length){var B=E*42,z=parseFloat(w(y).width());F=w("li.small",y).first();u=parseFloat(w(F).attr("data-size"))+55;if(B+u<z){w(y).removeClass("small-format");w("li.small",y).first().removeClass("small");v()}}else{w("li",y).not(".small").each(function(c){var f=parseFloat(w(this).attr("data-size"))+55,a=parseFloat(w(this).width());t+=a;A+=f});var D=t-A;F=w("li.small",y).first();u=parseFloat(w(F).attr("data-size"))+55;if(u<D){w(F).removeClass("small");v()}}})},d=function(a){w(".rrssb-buttons").each(function(l){var o=w(this),f=w("li",o).nextAll(),c=f.length;w(w("li",o).get().reverse()).each(function(u,t){if(w(this).hasClass("small")===!1){var s=parseFloat(w(this).attr("data-size"))+55,y=parseFloat(w(this).width());if(s>y){var n=w("li",o).not(".small").last();w(n).addClass("small");v()}}--t||x()})});a===!0&&k(v)},v=function(){w(".rrssb-buttons").each(function(z){var B=w(this),r,t,A,l,c,y=w("li.small",B).length;if(y>0&&y!==w("li",B).length){w(B).removeClass("small-format");w("li.small",B).css("width","42px");A=y*42;r=w("li",B).not(".small").length;t=100/r;c=A/r;navigator.userAgent.indexOf("Chrome")>=0||navigator.userAgent.indexOf("Safari")>=0?l="-webkit-calc("+t+"% - "+c+"px)":navigator.userAgent.indexOf("Firefox")>=0?l="-moz-calc("+t+"% - "+c+"px)":l="calc("+t+"% - "+c+"px)";w("li",B).not(".small").css("width",l)}else{if(y===w("li",B).length){w(B).addClass("small-format");b()}else{w(B).removeClass("small-format");b()}}});j()},q=function(){w(".rrssb-buttons").each(function(a){w(this).addClass("rrssb-"+(a+1))});b();w(".rrssb-buttons li .text").each(function(a){var c=parseFloat(w(this).width());w(this).closest("li").attr("data-size",c)});d(!0)},k=function(a){w(".rrssb-buttons li.small").removeClass("small");d();a()},h=function(F,e,z,G){var n=m.screenLeft!==g?m.screenLeft:screen.left,E=m.screenTop!==g?m.screenTop:screen.top,D=m.innerWidth?m.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,B=m.innerHeight?m.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,y=D/2-z/2+n,C=B/3-G/3+E,A=m.open(F,e,"scrollbars=yes, width="+z+", height="+G+", top="+C+", left="+y);m.focus&&A.focus()},p=function(){var a={};return function(c,f,e){e||(e="Don't call this twice without a uniqueId");a[e]&&clearTimeout(a[e]);a[e]=setTimeout(c,f)}}();w(".rrssb-buttons a.popup").on("click",function(a){var c=w(this);h(c.attr("href"),c.find(".text").html(),580,470);a.preventDefault()});w(m).resize(function(){k(v);p(function(){k(v)},200,"finished resizing")});w(document).ready(function(){q()})})(window,jQuery);